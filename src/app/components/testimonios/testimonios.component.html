<h1 class="titulo">Déjanos un comentario</h1>

<div class="svg-container">
  <svg width="100%" height="100%" id="svg" viewBox="0 0 1440 690" xmlns="http://www.w3.org/2000/svg" class="transition duration-300 ease-in-out delay-150"><path d="M 0,700 L 0,131 C 107.87559808612443,162.88516746411483 215.75119617224885,194.77033492822966 320,189 C 424.24880382775115,183.22966507177034 524.8708133971292,139.80382775119614 612,125 C 699.1291866028708,110.19617224880385 772.7655502392345,124.01435406698567 864,130 C 955.2344497607655,135.98564593301433 1064.066985645933,134.13875598086125 1163,133 C 1261.933014354067,131.86124401913875 1350.9665071770335,131.4306220095694 1440,131 L 1440,700 L 0,700 Z" stroke="none" stroke-width="0" fill="#9900ef" fill-opacity="0.4" class="transition-all duration-300 ease-in-out delay-150 path-0"></path>
    <path d="M 0,700 L 0,306 C 111.53110047846889,324.22966507177034 223.06220095693777,342.4593301435407 308,356 C 392.9377990430622,369.5406698564593 451.28229665071774,378.3923444976077 532,361 C 612.7177033492823,343.6076555023923 715.8086124401913,299.9712918660287 829,275 C 942.1913875598087,250.0287081339713 1065.4832535885168,243.7224880382775 1169,252 C 1272.5167464114832,260.2775119617225 1356.2583732057415,283.1387559808612 1440,306 L 1440,700 L 0,700 Z" stroke="none" stroke-width="0" fill="#9900ef" fill-opacity="0.53" class="transition-all duration-300 ease-in-out delay-150 path-1"></path>
    <path d="M 0,700 L 0,481 C 117.14832535885168,440.1578947368421 234.29665071770336,399.3157894736842 317,415 C 399.70334928229664,430.6842105263158 447.9617224880383,502.8947368421052 536,516 C 624.0382775119617,529.1052631578948 751.8564593301435,483.1052631578948 854,461 C 956.1435406698565,438.8947368421052 1032.6124401913876,440.6842105263158 1126,448 C 1219.3875598086124,455.3157894736842 1329.6937799043062,468.1578947368421 1440,481 L 1440,700 L 0,700 Z" stroke="none" stroke-width="0" fill="#9900ef" fill-opacity="1" class="transition-all duration-300 ease-in-out delay-150 path-2"></path>
  </svg>
</div>

<!-- Formulario para agregar testimonios -->
<form (ngSubmit)="enviarTestimonio()">
  <label>Nombre:</label>
  <input type="text" [(ngModel)]="nuevoTestimonio.nombre" name="nombre" required />

  <label>Comentario:</label>
  <textarea [(ngModel)]="nuevoTestimonio.comentario" name="comentario" required></textarea>

  <label>Foto (URL opcional):</label>
  <div class="input-con-ayuda">
    <input type="text" [(ngModel)]="nuevoTestimonio.imagen_url" name="foto" />
    <mat-icon
      [matTooltip]="instruccionesTooltip"
      matTooltipPosition="right"
      class="icono-ayuda"
    >
      help_outline
    </mat-icon>
  </div>

  <label>O elige un avatar:</label>
  <div class="selector-avatar">
    <button type="button" (click)="mostrarSelectorAvatares = !mostrarSelectorAvatares" class="boton-avatar">
      <mat-icon>account_circle</mat-icon> Elegir avatar
    </button>
    <div *ngIf="mostrarSelectorAvatares" class="menu-avatares">
      <div *ngFor="let avatar of avatares" class="avatar-opcion" (click)="seleccionarAvatar(avatar)">
        <img [src]="avatar" alt="Avatar" class="avatar-imagen" />
      </div>
    </div>
  </div>

  <button type="submit">Enviar Testimonio</button>
</form>

<!-- Mostrar mensajes de éxito o error -->
<p *ngIf="mensaje" class="mensaje">{{ mensaje }}</p>

<!-- Carrusel de testimonios -->
<div class="testimonios-container">
  <div class="carrusel">
    <!-- Iterar sobre los testimonios -->
    <div *ngFor="let testimonio of testimonios; let i = index" class="testimonio">
      <img
        [src]="testimonio.imagen_url || 'https://res.cloudinary.com/drsyb53ae/image/upload/f_auto,q_auto/v1/fotos-comprimidas/sgv/i3rtocblrenfj7kh7xn0'"
        alt="{{ testimonio.nombre }}"
        class="testimonio-imagen"
      />
      <h3 class="testimonio-nombre">{{ testimonio.nombre }}</h3>
      <p class="testimonio-comentario">{{ testimonio.comentario }}</p>
    </div>
  </div>
</div>
